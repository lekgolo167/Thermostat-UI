{% extends 'base.jinja' %} {% block head %}
<title>Thermostat</title>

{% endblock %} {% block body %}

<div class="neu-container">
    <div class="neu">
        <div class="row">
            {% for day in range(0, 8)%}
            <div class="column">
                {% if day == selDay %}
                <input type="checkbox" class={{days[day]}} onclick="setDay({{day}})" checked> {% else %}
                <input type="checkbox" class={{days[day]}} onclick="setDay({{day}})"> {% endif %}
            </div>
            {% endfor %}
        </div>
    </div>
</div>


<div class="container">
    <div class="neu-container">
        <h1 style="text-align: top">Enxor Thermostat</h1>

        <div class="neu">
            <div class="neu-inset">
                <output id="set-temp">{{mid_t}}</output>
            </div>
            <div style="padding: 10px; margin-bottom: 10px">
                <input type="range" class="neu-range" id="temp-slider" min="1" max="100" value="50"">
            </div>

            <div align="center">
                <input type="text" id="sel_time" hidden="true" />
                <div id="time_picker">
                </div>
                <div class="neu"></div>
                <button class="neu-btn" onclick="updateCycle(0)">Add Cycle</button>
                <button class="neu-btn" onclick="setTemporaryTemp()">Set Temporary</button>
            </div>
        </div>
        <div class="neu">

        </div>

        <div class="neu">
            {% if cycles|length< 1 %} 
            <h4>There are no cycles. Create one below!</h4>
            {% else %} {% for i in range(cycles|length) %}
                <div class="neu">
                    <div class="row" style="align-items: center; text-align: center">
                        <div class="column">
                            <div >
                                <i class="far fa-clock"></i>
                                {% if cycles[i].h > 12 %}
                                <label>{{ cycles[i].h - 12 }}:{{ '%02d' | format(cycles[i].m) }} pm</label>
                                {% elif cycles[i].h == 12 %}
                                <label>{{ cycles[i].h }}:{{ '%02d' | format(cycles[i].m) }} pm</label>
                                {% elif cycles[i].h == 0 %}
                                <label>{{ cycles[i].h + 12 }}:{{ '%02d' | format(cycles[i].m) }} am</label>
                                {% else %}
                                <label>{{ cycles[i].h }}:{{ '%02d' | format(cycles[i].m) }} am</label>
                                {% endif %}
                            </div>
                        </div>
                        <div class="column">
                            <div >
                                <i class="fas fa-thermometer-half"></i>
                                <label>{{ cycles[i].t|int }} FÂ°</label>
                            </div>
                        </div>
                        <div class="column">
                            <button class="neu-btn update-btn" onclick="updateCycle({{cycles[i].id}})">Update</button>
                        </div>
                        <div class="column">
                            {% if i != 0%}
                            <button class="neu-btn delete-btn" onclick="deleteCycle({{cycles[i].id}})">Delete</button>
                            {% endif %}
                        </div>
                    </div>
                </div>
            {% endfor %} 
            {% endif %}
        </div>

    </div>
    <div>
    <div class="neu">
        <canvas id="scheduleGraph" style="height: 370px; width: 100%;"></canvas>
    </div>
        <h2 style="text-align: center">Estimated Runtime: {{"%.2f"|format(runtime)}} Hrs.</h2>
        <label for="simDay">Simulation date:</label>

        <form name="datePicker" action="/setDate" method="POST">
            <input type="date" id="datePicker" name="datePicker" value="{{today}}" min="" max="">
            <button type="submit">Date</button>
        </form>
        <form name="startTempPicker" action="/startTemp" method="POST">
            <input type="number" id="startTempPicker" name="startTempPicker" value="{{startTemp}}" min="" max="">
            <button type="submit">Set</button>
        </form>

        
        <div class="neu">
        <label>Copy Today To ... </label>
        <form action="/copyDayTo" method="POST">
        <fieldset id="c">      

        <div class="row">   
        {% for day in range(0, 8)%}
            {% if day != selDay %}
                <div class="column">
                    <input type="checkbox" name={{days[day]}} class={{days[day]}}>
                </div>
            {% endif %} 
        {% endfor %}
        </div>
        <button class="neu-btn" style="color: gray" type="submit">Copy</button>
        </fieldset>  
        </form>
        </div>
        <script>

        </script>

    </div>
</div>
<script src="{{ url_for('static', filename='js/main.js') }}"></script>
<script>
var min_t = {{min_t}};
var max_t = {{max_t}};
</script>
<script src="{{ url_for('static', filename='js/graph.js') }}"></script>
{% endblock %}